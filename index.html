<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How Petty Are You kk ðŸ¥¹?</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const TRANSLATIONS = {
          "en-US": {
            "title": "How petty are you?",
            "subtitle": "Share your grievance and get the verdict",
            "inputLabel": "What's bothering you?",
            "inputPlaceholder": "Type mf",
           
            "exampleDoorHolding": "Door holding",
            "exampleFishMicrowaver": "No valentine",
            "exampleWrongTP": "Jatt issue?",
        
            "grievanceDoorHolding": "Someone didn't say thank you when I held the doorwor",
            "grievanceFishMicrowaver": "Where is my Valentine?",
            "grievanceWrongTP": "did'nt sleep enough last night and have my office now",
            "errorMessage": "Please enter a grievance to analyze!",
            "analyzeButton": "Measure my pettiness!",
            "analyzingButton": "Analyzing pettiness...",
            "analysisTitle": "Analysis",
            "adviceTitle": "Advice",
            "tryAnotherButton": "Try another grievance"
          }
        };

        const browserLocale = navigator.languages?.[0] || navigator.language || 'en-US';
        const findMatchingLocale = (locale) => {
          if (TRANSLATIONS[locale]) return locale;
          const lang = locale.split('-')[0];
          const match = Object.keys(TRANSLATIONS).find(key => key.startsWith(lang + '-'));
          return match || 'en-US';
        };
        const locale = findMatchingLocale(browserLocale);
        const t = (key) => TRANSLATIONS[locale]?.[key] || TRANSLATIONS['en-US'][key] || key;

        const AlertCircle = ({ className }) => (
          <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        );

        const PettinessMeter = () => {
          const [grievance, setGrievance] = useState('');
          const [loading, setLoading] = useState(false);
          const [result, setResult] = useState(null);
          const [error, setError] = useState('');
          const [displayScore, setDisplayScore] = useState(0);

          const exampleGrievances = [
            { label: t('exampleLoudBreathing'), text: t('grievanceLoudBreathing') },
            { label: t('exampleDoorHolding'), text: t('grievanceDoorHolding') },
            { label: t('exampleFishMicrowaver'), text: t('grievanceFishMicrowaver') },
            { label: t('exampleWrongTP'), text: t('grievanceWrongTP') }
          ];

          // Pettiness analysis logic
          const analyzeGrievance = async () => {
            if (!grievance.trim()) {
              setError(t('errorMessage'));
              return;
            }

            setLoading(true);
            setError('');

            // Simulate processing time
            await new Promise(resolve => setTimeout(resolve, 1500));

            try {
              const text = grievance.toLowerCase();
              
              // Keywords and patterns for analysis
              const seriousKeywords = ['danger', 'harm', 'hurt', 'safety', 'illegal', 'theft', 'stolen', 'assault', 'threat', 'abuse'];
              const reasonableKeywords = ['loud', 'smell', 'late', 'mess', 'dirty', 'broken', 'rude', 'unfair', 'fish', 'microwave'];
              const pettyKeywords = ['breathe', 'breathing', 'chew', 'thank', 'door', 'toilet paper', 'tp', 'seat', 'volume', 'tone'];
              const veryPettyKeywords = ['looked at', 'glanced', 'smiled', 'didn\'t smile', 'walked', 'stood', 'sat'];
              
              let score = 50; // Start at middle
              
              // Check for serious issues
              if (seriousKeywords.some(word => text.includes(word))) {
                score = Math.max(5, Math.floor(Math.random() * 20));
              }
              // Check for reasonable complaints
              else if (reasonableKeywords.some(word => text.includes(word))) {
                score = 25 + Math.floor(Math.random() * 25);
              }
              // Check for petty complaints
              else if (pettyKeywords.some(word => text.includes(word))) {
                score = 55 + Math.floor(Math.random() * 20);
              }
              // Check for very petty
              else if (veryPettyKeywords.some(word => text.includes(word))) {
                score = 80 + Math.floor(Math.random() * 20);
              }
              // Default based on length and punctuation
              else {
                const hasExclamation = text.includes('!');
                const wordCount = text.split(' ').length;
                
                if (wordCount < 5) score = 70 + Math.floor(Math.random() * 20);
                else if (wordCount > 30) score = 20 + Math.floor(Math.random() * 25);
                else if (hasExclamation) score += 15;
              }
              
              // Determine category
              let category = '';
              if (score <= 20) category = 'Legitimate concern';
              else if (score <= 40) category = 'Reasonable gripe';
              else if (score <= 60) category = 'Getting petty';
              else if (score <= 80) category = 'Pretty petty';
              else category = 'Peak pettiness';
              
              // Generate judgment
              const judgments = {
                'Legitimate concern': [
                  "Okay, this actually sounds serious. You're not being petty at all.",
                  "Yeah, this is a real issue. Anyone would be bothered by this.",
                  "This is genuinely concerning. You have every right to be upset."
                ],
                'Reasonable gripe': [
                  "Fair enough, that would annoy most people. Not petty!",
                  "That's legitimately annoying. Your frustration is valid.",
                  "Yeah, I'd be irritated too. Totally reasonable complaint."
                ],
                'Getting petty': [
                  "Okay, it's a bit annoying, but maybe take a deep breath?",
                  "I mean... it's not great, but is it really that bad?",
                  "You're starting to venture into petty territory here, friend."
                ],
                'Pretty petty': [
                  "Come on now, this is pretty petty. Let it go!",
                  "That's... that's pretty petty, not gonna lie.",
                  "You might want to let this one slide. Just saying."
                ],
                'Peak pettiness': [
                  "Wow. PEAK pettiness achieved. Congratulations?",
                  "This is impressively petty. Like, award-winning petty.",
                  "Really? REALLY? That's what's bothering you?"
                ]
              };
              
              // Generate advice
              const advices = {
                'Legitimate concern': [
                  "You should definitely address this with the person involved.",
                  "Talk to them about it - this needs to be resolved.",
                  "Don't let this slide. Have a conversation about it."
                ],
                'Reasonable gripe': [
                  "Maybe mention it politely if it happens again.",
                  "Worth bringing up in a friendly way.",
                  "A gentle conversation could help clear this up."
                ],
                'Getting petty': [
                  "Try to let it go, but if it keeps happening, then speak up.",
                  "Deep breaths. Pick your battles wisely.",
                  "Maybe wait and see if it's a pattern before saying anything."
                ],
                'Pretty petty': [
                  "Let it go. Seriously, just let it go.",
                  "Find something else to focus on. Like literally anything else.",
                  "Life's too short to stress about this one."
                ],
                'Peak pettiness': [
                  "Please, for your own sake, let this go and never think about it again.",
                  "Go touch some grass. Clear your head. Move on.",
                  "This is not worth a single second of your mental energy."
                ]
              };
              
              const judgment = judgments[category][Math.floor(Math.random() * judgments[category].length)];
              const advice = advices[category][Math.floor(Math.random() * advices[category].length)];
              
              const data = { score, category, judgment, advice };
              setResult(data);
              animateScore(data.score);
            } catch (err) {
              setError('Something went wrong. Please try again!');
              console.error('Error:', err);
            } finally {
              setLoading(false);
            }
          };

          const animateScore = (targetScore) => {
            const duration = 1500;
            const startTime = Date.now();
            const startScore = 0;

            const updateScore = () => {
              const now = Date.now();
              const progress = Math.min((now - startTime) / duration, 1);
              
              const easeOut = 1 - Math.pow(1 - progress, 3);
              const currentScore = Math.round(startScore + (targetScore - startScore) * easeOut);
              
              setDisplayScore(currentScore);
              
              if (progress < 1) {
                requestAnimationFrame(updateScore);
              }
            };
            
            requestAnimationFrame(updateScore);
          };

          const getGaugeFillDasharray = (score) => {
            const arcLength = 220;
            const fillLength = (score / 100) * arcLength;
            return `${fillLength} ${arcLength}`;
          };

          return (
            <div className="min-h-screen p-8" style={{ backgroundColor: '#F4BE72' }}>
              <div className="max-w-2xl mx-auto">
                <h1 className="text-5xl font-bold text-center mb-2" style={{ color: '#45260C' }}>
                  {t('title')}
                </h1>
                <p className="text-center mb-8" style={{ color: '#45260C' }}>
                  {t('subtitle')}
                </p>

                <div className="bg-white rounded-2xl shadow-xl p-8">
                  <div className="flex flex-col items-center mb-8">
                    <div className="relative w-80 h-48 mb-4">
                      <svg viewBox="0 0 200 130" className="w-full h-full">
                        <path
                          d="M 30 100 A 70 70 0 0 1 170 100"
                          fill="none"
                          stroke="#E5E7EB"
                          strokeWidth="20"
                          strokeLinecap="round"
                        />
                        
                        <path
                          d="M 30 100 A 70 70 0 0 1 170 100"
                          fill="none"
                          stroke="#E68600"
                          strokeWidth="20"
                          strokeLinecap="round"
                          strokeDasharray={getGaugeFillDasharray(displayScore)}
                          style={{ transition: 'stroke-dasharray 0.3s ease-out' }}
                        />
                        
                        <text x="28" y="125" textAnchor="middle" className="text-xs font-medium" fill="#45260C">0</text>
                        <text x="100" y="15" textAnchor="middle" className="text-xs font-medium" fill="#45260C">50</text>
                        <text x="172" y="125" textAnchor="middle" className="text-xs font-medium" fill="#45260C">100</text>
                      </svg>
                      
                      <div className="absolute inset-0 flex items-center justify-center">
                        <div className="text-center mt-16">
                          <span className="text-5xl font-bold block" style={{ color: '#E68600' }}>
                            {result ? displayScore : 0}%
                          </span>
                          {result && (
                            <span className="text-sm font-medium mt-1 block" style={{ color: '#E68600' }}>
                              {result.category}
                            </span>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div className="mb-6">
                    <label className="block text-lg font-semibold mb-3" style={{ color: '#45260C' }}>
                      {t('inputLabel')}
                    </label>
                    
                    {!result ? (
                      <>
                        <textarea
                          value={grievance}
                          onChange={(e) => setGrievance(e.target.value)}
                          placeholder={t('inputPlaceholder')}
                          className="w-full p-4 border-2 border-orange-200 rounded-lg focus:border-orange-500 focus:outline-none resize-none"
                          style={{ borderColor: 'rgba(230, 134, 0, 0.3)' }}
                          rows={4}
                        />
                        
                        <div className="mt-3">
                          <div className="flex flex-wrap gap-2">
                            {exampleGrievances.map((example, index) => (
                              <button
                                key={index}
                                onClick={() => setGrievance(example.text)}
                                className="px-3 py-1 text-sm border rounded-full transition-colors hover:bg-orange-50"
                                style={{ 
                                  borderColor: '#E68600',
                                  color: '#45260C',
                                  backgroundColor: 'white'
                                }}
                              >
                                {example.label}
                              </button>
                            ))}
                          </div>
                        </div>
                        
                        {error && (
                          <div className="mt-3 flex items-center text-red-600">
                            <AlertCircle className="w-5 h-5 mr-2" />
                            <span>{error}</span>
                          </div>
                        )}

                        <button
                          onClick={analyzeGrievance}
                          disabled={loading}
                          className="mt-4 w-full py-4 rounded-lg font-bold text-white transition-all transform hover:scale-105 disabled:opacity-70 disabled:cursor-not-allowed"
                          style={{
                            backgroundColor: loading ? '#F5A854' : '#E68600',
                          }}
                        >
                          {loading ? t('analyzingButton') : t('analyzeButton')}
                        </button>
                      </>
                    ) : (
                      <div className="bg-gray-50 rounded-lg p-4">
                        <p className="italic" style={{ color: '#45260C' }}>"{grievance}"</p>
                      </div>
                    )}
                  </div>

                  {result && (
                    <div style={{ animation: 'fadeIn 0.5s ease-out' }}>
                      <div className="border-t border-gray-200 pt-6">
                        <div className="space-y-6">
                          <div>
                            <p className="text-lg font-semibold mb-3" style={{ color: '#45260C' }}>{t('analysisTitle')}</p>
                            <div className="bg-orange-50 rounded-lg p-4">
                              <p style={{ color: '#45260C' }}>
                                {result.judgment}
                              </p>
                            </div>
                          </div>
                          
                          <div>
                            <p className="text-lg font-semibold mb-3" style={{ color: '#45260C' }}>{t('adviceTitle')}</p>
                            <div className="bg-orange-100 rounded-lg p-4">
                              <p style={{ color: '#45260C' }}>
                                {result.advice}
                              </p>
                            </div>
                          </div>
                        </div>

                        <button
                          onClick={() => {
                            setGrievance('');
                            setResult(null);
                            setDisplayScore(0);
                          }}
                          className="mt-6 w-full py-3 border-2 rounded-lg font-semibold transition-colors hover:bg-orange-50"
                          style={{ 
                            borderColor: '#E68600', 
                            color: '#E68600' 
                          }}
                        >
                          {t('tryAnotherButton')}
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              </div>

              <style>{`
                @keyframes fadeIn {
                  from {
                    opacity: 0;
                    transform: translateY(20px);
                  }
                  to {
                    opacity: 1;
                    transform: translateY(0);
                  }
                }
              `}</style>
            </div>
          );
        };

        ReactDOM.render(<PettinessMeter />, document.getElementById('root'));
    </script>
</body>
</html>
